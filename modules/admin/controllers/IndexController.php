<?php/** * Created by PhpStorm. * User: wei.wang * Date: 2017/6/15 * Time: 14:55 */namespace app\modules\admin\controllers;use app\models\User;use yii;use yii\web\Controller;use yii\web\Request;class IndexController extends CommonController{    public $layout = false;    public function actionIndex2(){        return $this->render('index2');    }    public function actionIndex(){        return $this->render('index');    }    public function actionIndex3()    {        //  yii\helpers\Url::to(['Index/index', 'year' => 2016, 'category' => 'php']) ;        $get = $this->getGET();        var_dump($get);        var_dump($_GET);        $request = Yii::$app->request;        $get = $request->get();        var_dump($get);        $get = Yii::$app->request->queryParams;        var_dump($get);        $url = Yii::$app->request->getPathInfo();        var_dump($url);        echo $this->module->id;        echo $this->id;        echo $this->action->id;       // $res_count = Yii::$app->db1->createCommand()->select('count(*) as num')->from('user')->queryScalar();        $res_count = Yii::$app->db1->createCommand('SELECT * FROM user')->queryAll();        $aa1 = Yii::$app->db1;       // var_dump($aa1);       // var_dump($res_count);        $conf= Yii::$app->getComponents();        var_dump($conf['db2']);        $conf = Yii::$app->params;        $conf = Yii::$app->components;        echo '1111111111111<br />';       $prefix= Yii::$app->components['db1']['tablePrefix'];        var_dump($prefix);        var_dump($conf);       echo Yii::$app->request->userIP;        //$user = user::find()->where(['id' => '1'])->one();        $sql = 'SELECT * FROM user WHERE id = :id';        $user = Yii::$app->db1->createCommand("SELECT * FROM user")->queryOne();        $sql = "select * from `group_access` as a LEFT OUTER JOIN  `group` as g on  a.group_id=g.id where a.uid=:uid and g.status=1";        $user_groups = Yii::$app->db1->createCommand($sql,array('uid'=>1))->queryAll();        var_dump($user_groups);        //$user =  User::findOne(1);//        Yii::app()->db->createCommand()//            ->select('*')//            ->from('message msg')//            ->join('member u', 'u.sso_id = msg.receive_id')//            ->where('msg.is_del=:is_del', array(':is_del' => '0'))//            ->queryRow();            //User::findBySql($sql,array(':id'=>'1'))->all();//        $connection = new \yii\db\Connection([//            'dsn' => $dsn,//            'username' => $username,//            'password' => $password,//        ]);//        $connection->open();//        Yii::$app->controller->module->id;//        控制器名   Yii::$app->controller->id//方法名  Yii::$app->controller->action->id;        return $this->render('index3');    }    /**     * 创建token     */    public function actionCreatetoken(){        $uid  = $this->getGET('uid');        var_dump($uid);        $a= $this->_createToken($uid);        var_dump($a);    }    /**     * 解密token     */    public function actionDecrypttoken(){        $token  = $this->getGET('token');        var_dump($token);        $token_str = $this->__decryptToken($token);        list($uid, $rand) = explode('|', $token_str);       echo date('y-m-d H:m:s','1498121990'),'<br/>';        echo $uid;    }}